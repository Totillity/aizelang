import "<local>/thing.az";
import "<std>/io.az";


@entry
def main() -> int32 {
    var callback: () -> int32 = get_test_callback();
    var tup: (() -> int32, int32) = (callback, 0);
    callback();
    return 0;
}


def get_test_callback() -> () -> int32 {
    return () -> test();
}


def test() -> int32 {
    var container: Container = new Container { 30 };
    container.print_num();
    return 0;
}


struct Container {
    attr num: int32;

    def get_self(self) -> Container {
        return self;
    }

    def print_num(self) -> int32 {
        io::print_int(self.get_num());
        return 0;
    }

    def get_num(self) -> int32 {
        return self.num;
    }
}