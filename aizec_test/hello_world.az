import "<local>/thing.az";
import "<std>/io.az";


union Maybe {
    Some = int32;
    Could = int8;
    None = ();

    def expect(self) -> int32 {
        if (self is Some(n)) {
            return n;
        } else {
            return 0;
        }
    }
}


@entry
def main() -> int32 {
    var maybe: Maybe = new Could {@int8(40)};
#     var none: Maybe = new None {()};
    if (maybe is Some(n)) {
        io::print_int(n);
    } else if (maybe is Could(sn)) {
        io::print_int(sn);
    }
    return 0;
}


def get_test_callback() -> () -> int32 {
    return () -> test();
}


def test() -> int32 {
    var container: Container = new Container { 30 };
    container.print_num();
    return 0;
}


struct Container {
    attr num: int32;

    def get_self(self) -> Container {
        return self;
    }

    def print_num(self) -> int32 {
        io::print_int(self.get_num());
        return 0;
    }

    def get_num(self) -> int32 {
        return self.num;
    }
}